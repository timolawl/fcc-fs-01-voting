{"version":3,"sources":["../../../node_modules/browser-pack/_prelude.js","post.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","addOption","btnCounter","button","document","createElement","className","id","type","textContent","input","setAttribute","div","appendChild","querySelector","checkForm","path","validateInput","unique","pw","pwConfirm","submitBtn","disabled","Array","from","inputs","every","value","match","getAttribute","Set","map","size","form","style","outline","getElementsByClassName","onkeyup","onclick","displayModal","option","classList","remove","closeOptions","querySelectorAll","push","apply","forEach","addEventListener","event","add","prototype","reset","select","copyPollLink","console","log","execCommand","socket","io","window","onload","location","pathname","emit","room","slice","toLowerCase","on","data","parentNode","titles","newDiv","newLink","href","permalinks","protocol","host","buttonCounter","target","getElementById","removeChild","preventDefault","el","el_vote","vote","firstChild","el_option","ctx","myChart","Chart","labels","optionText","datasets","voteCount","backgroundColor","options","title","display","fontSize","text","pollTitle","legend","position","tooltips","xPadding","pollOptions","x","update","nextOption"],"mappings":"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","file":"post.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\n// socket io -- the cdnjs script is in the HTML template above this script file\nconst host = 'timolawl-voting.herokuapp.com';\nvar socket = io();\n/*\nif (host == location.host) {\n  socket = io.connect('https://timolawl-voting.herokuapp.com:5000');\n}\nelse socket = io.connect('//localhost:5000');\n*/\nfunction addOption (btnCounter) {\n    // need a way of keeping track of the count.\n    // either way, I just add to the end of the last count, even if sparse\n    const button = document.createElement('button');\n    button.className = 'form__button--delete';\n    button.id = `option-${btnCounter}`; // es6 template literal\n    button.type = 'button';\n    button.textContent = 'X';\n\n    const input = document.createElement('input');\n    input.className = 'form__input form__input--options';\n    input.setAttribute('type', 'text');\n    input.setAttribute('name', 'options');\n    input.setAttribute('placeholder', 'New Option');\n    input.setAttribute('pattern', '^[a-zA-Z0-9\\$@#&\\*\\+\\-][a-zA-Z0-9\\$@#&%\\*\\+\\'\\\"_/, \\.?!-]{0,200}$');\n\n    const div = document.createElement('div');\n    div.className = 'form__options--option';\n\n    div.appendChild(input)\n    div.appendChild(button);\n\n    document.querySelector('.form__options').appendChild(div);\n}\n\nfunction checkForm (path) {\n    // on form change or on group of input change, test\n    const form = document.querySelector('form');\n    // need live nodelist since add/deleting:\n    const inputs = document.getElementsByClassName('form__input');\n    const submitBtn = document.querySelector('input[type=\"submit\"]');\n    submitBtn.disabled = true;\n    //const inherentBtnColor = submitBtn.style.background;\n    //submitBtn.style.background = 'gray';\n    // better way would be to fade it out with a blend? overlay?\n\n    function validateInput () {\n        let unique, pw, pwConfirm;\n\n        submitBtn.disabled = true;\n\n        if (Array.from(inputs).every(input => input.value.match(input.getAttribute('pattern')))) {\n            if (path === 'createpoll' && inputs.length >= 3) {\n                unique = new Set(Array.from(inputs).map(input => input.value));\n                if (inputs.length === unique.size)\n                    submitBtn.disabled = false;\n            }\n            else if (path !== 'createpoll') {\n                if (path === 'signup') {\n                    pw = form.querySelector('.form__input--password');\n                    pwConfirm = form.querySelector('.form__input--confirm');\n                    if (pw.value === pwConfirm.value) {\n                        pw.style.outline = 'initial';\n                        pwConfirm.style.outline = 'initial';\n                        submitBtn.disabled = false;\n                    }\n                    else {\n                        pw.style.outline = '1px solid red';\n                        pwConfirm.style.outline = '1px solid red';\n                    }\n                }\n                else submitBtn.disabled = false;\n            }\n        }\n    }\n    form.onkeyup = validateInput;\n    form.onclick = validateInput;\n}\n\nwindow.onload = function () {\n  // socket io logic:\n  if (location.pathname.match(/^\\/$/)) // if home path\n    socket.emit('change room', { room: location.pathname }); // '/'\n\n  if (location.pathname.match(/^\\/poll\\/[0-9a-f-]+$/))\n    socket.emit('change room', { room: location.pathname.slice(6) }); // the nonce itself\n\n  if (location.pathname.match(/^\\/(?:signup|login|reset|createpoll|mypolls)\\/?/i))\n    socket.emit('leave room', { path: location.pathname.toLowerCase().slice(1) });\n\n/****************/    \n\n    if (location.pathname.match(/^\\/$/)) {\n      // populate the page with currently active charts by date.\n      socket.emit('list all polls', {});\n      \n      socket.on('populate all polls', function (data) {\n        let parentNode = document.querySelector('.polls');\n\n        for (let i = 0; i < data.titles.length; i++) {\n          let newDiv = document.createElement('div');\n          newDiv.className = 'poll__element--text';\n          newDiv.textContent = data.titles[i];\n          let newLink = document.createElement('a');\n          newLink.className = 'poll__element--link';\n          newLink.href = location.href + 'poll/' + data.permalinks[i];\n          newLink.appendChild(newDiv);\n          parentNode.appendChild(newLink);\n        }\n      });\n    }\n\n    if (location.pathname.match(/^\\/mypolls$/)) {\n      socket.emit('list my polls', {});\n      \n      socket.on('populate my polls', function (data) {\n        let parentNode = document.querySelector('.polls');\n\n        for (let i = 0; i < data.titles.length; i++) {\n          let newDiv = document.createElement('div');\n          newDiv.className = 'poll__element--text';\n          newDiv.textContent = data.titles[i];\n          let newLink = document.createElement('a');\n          newLink.className = 'poll__element--link';\n          newLink.href = location.protocol + '//' + location.host + '/poll/' + data.permalinks[i];\n          newLink.appendChild(newDiv);\n          parentNode.appendChild(newLink);\n        }\n      });\n\n    }\n\n    if (location.pathname.match(/^\\/createpoll\\/?/i)) { // why does this have only 1 slash?\n\n        let buttonCounter = 3; // initial setting since there's already 2 initially.\n\n        document.querySelector('.form').addEventListener('click', e => {\n\n            if (e && e.target.id.match(/^option-\\d+$/)) {\n                let target = document.getElementById(e.target.id).parentNode;\n                target.parentNode.removeChild(target);\n            }\n\n            // create function\n            if (e && e.target.id === 'option-create') {\n                e.preventDefault(); // apparently this is needed for preventing the 'requirement' popup.\n                addOption(buttonCounter);\n                buttonCounter++; // increment after\n            }\n        }); // event delegation\n    }\n    \n\n    if (location.pathname.match(/^\\/(?:signup|login|reset|createpoll)\\/?/i)) {\n      // clear out form\n      document.querySelector('form').reset();\n      // gray out submit button until everything is filled in.\n      checkForm(location.pathname.toLowerCase().slice(1));\n    }\n\n    if (location.pathname.match(/^\\/poll\\/[0-9a-f-]+$/)) {\n      // button click (general):\n      Array.prototype.forEach.call(document.querySelectorAll('.created-poll__option'), el => el.addEventListener('click', e => {\n        switch (e.target.classList[e.target.classList.length-1]) {\n          case 'created-poll__option--vote':\n            displayModal('vote');\n            break;\n          case 'created-poll__option--new-option':\n            displayModal('new-option');\n            break;\n          case 'created-poll__option--share':\n            displayModal('share');\n            break;\n          case 'created-poll__option--delete':\n            displayModal('delete');\n            break;\n          default:\n            console.log('uh oh...something went wrong.');\n            break;\n        }\n      }));\n\n      // better to set up socket io rooms and have the updates broadcast only to those in the same room or to have it such that broadcasts regardless of room but only those in the room will it have any effect? Rooming seems more organized.\n      \n\n      // on vote submit, pass along the selected option and with socket io update the db\n      // emit the event so that it updates...\n      // eventlistener for form submissions:\n      if (document.querySelector('.modal__form--vote')) { // if these elements exist, then..\n        let el_vote = document.querySelector('.modal__form--vote'); \n        el_vote.addEventListener('submit', e => {\n\t\t  e.preventDefault();\n\t\t  socket.emit('add vote', { vote: el_vote.firstChild.value, path: location.pathname.slice(6) });\n        });\n      }\n      if (document.querySelector('.modal__form--new-option')) {\n      \tlet el_option = document.querySelector('.modal__form--new-option');\n\t\tel_option.addEventListener('submit', e => {\n\t\t  e.preventDefault();\n\t\t  socket.emit('add option', { option: el_option.firstChild.value, path: location.pathname.slice(6) });\n\t\t});\n      }\n              \n      // draw the chart\n      var ctx = document.querySelector('.created-poll__poll--canvas');\n      var myChart = new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: optionText,\n          datasets: [{\n            data: voteCount,\n            backgroundColor: [\n\t\t\t  '#8DD3C7',\n\t\t\t  '#FFFFB3',\n\t\t\t  '#BEBADA',\n\t\t\t  '#FB8072',\n\t\t\t  '#80B1D3',\n\t\t\t  '#FDB462',\n\t\t\t  '#B3DE69',\n\t\t\t  '#FCCDE5',\n\t\t\t  '#D9D9D9',\n\t\t\t  '#BC80BD',\n\t\t\t  '#CCEBC5',\n\t\t\t  '#FFED6F'\n            ]\n          }]\n        },\n        options: {\n          title: {\n            display: false,\n            fontSize: 14,\n            text: pollTitle\n          },\n          legend: {\n            display: true,\n            position: 'bottom'\n          },\n          tooltips: {\n            xPadding: 10\n          }\n        }\n      \n      });\n      \n      socket.on('update poll', function (data) {\n        // on update, check if individual has voted yet or not\n        socket.emit('vote check', { path: location.pathname.slice(6) });\n\n        optionText = data.pollOptions.map(x => x.optionText);\n        voteCount = data.pollOptions.map(x => x.voteCount);\n        myChart.data.datasets[0].data = voteCount;\n        myChart.data.labels = optionText;\n        myChart.update();\n       // console.log('updating poll..');\n      });\n\n      socket.on('voted', function (data) {\n        document.querySelector('.created-poll__option--vote').textContent = 'Voted';\n        document.querySelector('.created-poll__option--vote').disabled = true;\n        document.querySelector('.created-poll__option--new-option').disabled = true;\n      });\n\n      \n      //  Chart.defaults.global.elements.arc.backgroundColor = 'rgba(0,0,0,0.3)';\n     //   Chart.defaults.global.elements.arc.borderColor = 'lightgray'; //'rgba(0,0,0,0.5)';\n       // Chart.defaults.global.elements.arc.borderWidth = 2;\n       // Chart.defaults.global.layout.padding = 5;\n      //\n      // Retrieve the data from the server (socket.io or ajax)\n      // HOWEVER, do not populate the chart js labels or title\n      // populate the title and labels separately because chart js combines styling\n      // and placement of the labels and title with the chart itself, making it hard\n      // to keep the chart size the same, etc.\n      // if more than 12 just repeat the colors yolo.\n\n      // title simply assign as such:\n      document.querySelector('.created-poll__title').textContent = pollTitle;\n      \n      // populate vote options once; will need to revisit later for the new option part\n      if (document.querySelector('.created-poll__option--vote')) {     \n        document.querySelector('.modal__vote--dropdown-li:nth-child(2)').textContent = optionText[0];\n        document.querySelector('.modal__vote--dropdown-li:nth-child(3)').textContent = optionText[1];\n            // add any additional options remaining:\n            \n        for (let i = 2; i < optionText.length; i++) {\n          let nextOption = document.createElement('option');\n          nextOption.classList.add('modal__vote--dropdown-li');\n          nextOption.textContent = optionText[i];\n          document.querySelector('.modal__vote--dropdown-ul').appendChild(nextOption);\n        }\n      }\n    }\n};\n\nfunction displayModal (option) {\n  // dim the background\n  document.querySelector('.modal__overlay').classList.remove('visibility--hide');\n\n  let closeOptions = Array.from(document.querySelectorAll('.modal__close'));\n  closeOptions.push.call(closeOptions, document.querySelector('.modal__overlay'));\n  if (document.querySelector('.modal__delete--no')) // if it exists\n    closeOptions.push.call(closeOptions, document.querySelector('.modal__delete--no'));\n  closeOptions.push.apply(closeOptions, Array.from(document.querySelectorAll('.modal__submit')));\n\n  // close button closes modal and relights background\n  closeOptions.forEach(e => e.addEventListener('click', event => {\n    document.querySelector('.modal__overlay').classList.add('visibility--hide');\n    Array.prototype.forEach.call(document.querySelectorAll('.modal'), e => e.classList.add('visibility--hide'));\n    // rehide the flash message on modal close\n    if (document.querySelector('.modal--share'))\n      document.querySelector('.modal__flash-message').classList.add('display--hide');\n  }));\n\n  switch (option) {\n    case 'vote':\n      // dynamically set up the vote modal (populate the options with the actual options)\n      // we know that there are at the very least two options, so populate those first\n      // would this make it too slow as it's always dynamic? really minor tbh\n      document.querySelector('.modal--vote').classList.remove('visibility--hide');\n      break;\n    case 'new-option':\n      document.querySelector('.modal__form--new-option').reset(); // put reset at open\n      document.querySelector('.modal--new-option').classList.remove('visibility--hide');\n      break;\n    case 'share':\n      // show the sharing modal\n      document.querySelector('.modal--share').classList.remove('visibility--hide');\n      document.querySelector('.modal__share--link-box').select();\n      // make the clipboard copy the link // may need clipboard js\n      document.querySelector('.modal__share--clipboard-button').addEventListener('click', copyPollLink); // copies current selection to clipboard\n      break;\n    case 'delete':\n      document.querySelector('.modal--delete-poll').classList.remove('visibility--hide');\n      break;\n    default:\n      console.log('wat');\n      break;\n  }\n} \n\n\nfunction copyPollLink () {\n// select all to get ready to copy\n  document.querySelector('.modal__share--link-box').select();\n// copy the selection\n  document.execCommand('copy');\n\n  document.querySelector('.modal__flash-message').classList.remove('display--hide')\n\n}\n\n\n"]}